# CSR 과 SSR


## CSR이란?

  CSR(Client Side Rendering)은 클라이언트 측에서 렌더링을 진행하는 것이다. 브라우저 측에서 JavaScript를 받고 클라이언트에서 모든 로직, 템플릿, 라우팅 등을 처리한다. 대표적으로 `React`와 `Vue` 프레임워크가 CSR 방식을 취한다.


### CSR의 단계

  1. User가 웹사이트 요청을 보낸다.

  2. CDN이 HTML 파일과 JS로 접근할 수 있는 링크를 클라이언트로 보낸다.

  3. 브라우저가 HTML를 다운 받고 난뒤 JS를 다운 받는다. 이때 웹 사이트는 user에게 아무것도 보여주지 않는다.

  4. 브라우저가 JS 까지 다 받고 난 후에야 JS가 실행되며, 데이터를 위한 API가 호출된다(이때 유저들은 placeholder를 보게 된다.)

  5. 서버가 API로부터의 요청에 응답한다.
  
  6. API로부터 받아온 data를 placeholder 자리에 넣어준다. 이제 페이지는 상호작용이 가능하게 된다.

<br>

## SSR이란?

  SSR(Server Side Rendering)은 서버에서 렌더링 준비를 끝마친 상태로 클라이언트에 전달하는 방식이다. 클라이언트가 request을 보내면 서버 측에서 데이터를 가져와서 페이지를 구성한 후 브라우저에 전달하는 것이다. 대표적으로 `Django` 프레임워크가 SSR 방식을 취한다.


### SSR의 단계

  1. user가 웹사이트 요청을 보낸다.

  2. 서버는 즉시 렌더링이 가능한 HTML파일을 만든다.

  3. 클라이언트에게 전달되는 순간, HTML은 즉시 렌더링 된다. 그러나 아직 사이트 조작이 불가능하다(그 이유는 JS가 읽히기 전이어서)

  4. 클라이언트가 JS를 다운받는다.

  5. 다운 받는 사이에 user는 사이트에서 컨텐츠를 볼 수 있지만 사이트를 조작할 수는 없다. 다만 이때의 사용자 조작(the interactions)은 기록된다.

  6. 브라우자가 JS 프레임워크를 실행한다.

  7. JS까지 성공적으로 컴파일 되면 기록된 사용자 조작이 실행되고 웹 페이지는 상호작용이 가능하게 된다.

<br>

## 두 방식의 차이

### 웹페이지 로딩 시간
  - 첫 페이지 로딩 시간
    CSR의 경우 HTML, CSS와 모든 JS들을 한 번에 불러오지만,
    SSR의 경우 필요한 부분의 HTML만 불러오기 때문에 평균적으로 SSR이 더 빠르다.


  - 나머지 로딩 시간
    첫 페이지 로딩 후 사이트의 다른 곳으로 이동하는 식의 동작을 할 경우, CSR은 첫 페이지 로딩 시에 나머지 부분을 구성하는 코드를 받아왔기 때문에 빠르다.  
    반면, SSR은 첫 페이지 로딩 과정을 정확하게 다시 실행하므로 더 느리다.
  

### SEO(Search Engine Optimization) 관점


  검색 엔진은 크롤러로 웹 사이트들을 읽는다. CSR은 JS를 실행시켜 동적으로 컨텐츠가 생성되기 때문에 자바스크립트가 실행되어야 <b>Metadata</b>를 바뀐다. 다만, 구글의 검색 엔진은 자바스크립트 엔진이 내장되어 있어 크롤러가 CSR도 문제 없이 읽을 수 있다.
  SSR은 애초에 서버 측에서 컴파일되어 클라이언트로 넘어오기 때문에 크롤러 대응하기에 용이하다.


### 서버 자원 사용


  CSR은 클라이언트 측에서 렌더링을 하기 때문에 서버에 부하가 적은 반면, 
  SSR은 매번 서버에 요청을 하기 때문에 서버 자원을 더 많이 사용한다.

<br>

## 결론

  CSR과 SSR 모두 장단점이 있기 때문에 어떤 방식이 더 좋다고 말할 수 없다. 상황에 필요한 방식을 채택하는 것이 중요.